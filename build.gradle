plugins {
    id "com.github.johnrengelman.shadow" version "6.1.0"
    id "org.jetbrains.kotlin.jvm" version "1.6.10"
    id "net.kyori.blossom" version "1.3.0"
    id "java"
}

sourceCompatibility = targetCompatibility = 1.8
compileJava.options.encoding = "UTF-8"

allprojects {
    apply plugin: "com.github.johnrengelman.shadow"

    ext {
        defaultShadow = true
    }
    
    configurations {
        shade
        implementation.extendsFrom(shade)
    }

    repositories {
        mavenLocal()
        mavenCentral()
        maven { url("https://jitpack.io/") }
        maven { url("https://repo.sk1er.club/repository/maven-public/") }
        maven { url("https://repo.spongepowered.org/maven/") }
    }
    
    shadowJar {
        configurations = [project.configurations.shade]
        duplicatesStrategy = DuplicatesStrategy.EXCLUDE
        archiveClassifier.set("")
    }
    
    if (defaultShadow) {
        jar.finalizedBy(shadowJar)
    }
}
